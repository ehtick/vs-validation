steps:
- task: ComponentGovernanceComponentDetection@0
  displayName: 🔍 Component Detection

- task: notice@0
  displayName: 🛠️ Generate NOTICE file
  inputs:
    outputfile: $(System.DefaultWorkingDirectory)/obj/NOTICE
    outputformat: text
  condition: and(succeeded(), ne(variables['Build.Reason'], 'PullRequest'))
  retryCountOnTaskFailure: 3 # fails when the cloud service is overloaded
